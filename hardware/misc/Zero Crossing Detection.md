## 什么是过零检测
我们知道，在交流回路中，电压随时间的变化是正弦波，当波形由正半周向负半周转换或者由负半周向正半周转换时，经过 x 坐标的点就是 过零点。

所谓 过零检测，就是对 过零点 进行检测，判断交流电是否到达这个点，如下图所示：
![alt text](<assets/Zero Crossing Detection/image.png>)

### 为何需要过零检测
为什么需要过零检测，简单来说就是：

为了让使用交流电的系统 更加安全稳定，同时方便对系统进行控制。

我们知道交流电的电压是在一直变化的，如果我们的用电系统开关的时候都处于电压高点，那么这个时候的电流也会对应的比较大，忽然间打开关短对系统会造成一定的 “冲击”，有时候也会产生一些电弧火花，就是所谓的浪涌，这样存在安全隐患，在一些带大功率负载的交流回路中，风险会更大。

如果我们系统能够知道每次过零点的时间，在这个时候去进行开关控制，那么可以使得系统安全稳定。

另外，我们通过检测交流电信号的过零点，可以实现交流电电子设备的开关控制、电流采样和保护功能，在调光开关/调光器、电机调速产品中，可从零点开始控制交流电导通角的大小，实现调光灯具亮度、电机速度的调节。

## 如何做过零检测
首先我们要明白，我们做过零检测，最直观的是检测什么？ 实际上就是电压。 电压变成 0 的时候，就是 零点。

如何检测，我这里直接先告诉大家，从结果来看，最常见的过零检测电路 末端输出 有如下两种方式：

第一种，过零点时候电路末端会输出脉冲，如下图：
![alt text](<assets/Zero Crossing Detection/image-1.png>)

第二种，过零点的时候，电路末端电平会发生变化，如下图：

当然 ，直接ADC 采样也是一种方式，但是相对前面这两种用得不多。

大家看了上面的两种结果，是不是若有所思，回顾一下我们所学过的电路知识，能够实现上面这种检测电压变化的很多器件，比如我们的三极管，MOS管，比较器/运放，光耦，是不是感觉都可以搭建方案。

### 光耦
本段落我们主要讲解一下测量思路，在下面一小节我会罗列汇总一些电路，提供给大家参考。

说到光耦至于 220V 交流的应用，在我很早的一篇文章

单片机检测信号通断通用电路（3.3V/5V直流信号，24V+直流信号，220V交流信号）

我们稍微变通一下，电路变成如下，是不是理论上就能够产生下图所示的输出:
![alt text](<assets/Zero Crossing Detection/image-2.png>)
当然，如果我们做一下整流，也可以使得输出脉冲信号，如下图：

![alt text](<assets/Zero Crossing Detection/image-3.png>)
### 比较器/运放

对于比较器以及后面的三极管而言，我们一般来说需要先降压，然后进行处理，是比较妥当的一种方式，比如下面图的示例：
![alt text](<assets/Zero Crossing Detection/image-4.png>)
上面的设计是脉冲，通过 R22， R21 控制小于 Vcc /101 电压的时候 ( 如果 VCC 为3.3V ，阀门大概在 0.03V ) , 输出 S2 会输出一个高电平信号，因为时间很短，所以结果为脉冲。

当然大家也可以把比较器的 负 输出端连接 GND ，也就是 0V ，然后 + 输入端连接降压后但是不整流的输入（220V的交流变成低压的交流），这样输出 S2 就能形成方波输出，但是不整流需要额外注意一些问题，这里就不详细说明。

### 三极管/MOS管
对于三极管和 MOS 管来说，与上面的比较器也是类似的，直接上个示意图：
![alt text](<assets/Zero Crossing Detection/image-5.png>)
需要说明的是，通过 三极管或者 MOS 管判断的输出脉冲，会比上面使用比较器的脉冲会宽一些。

三极管 0.7V 就导通了，MOS管可能会更大一些，比如有些 1.0V 左右就导通了。

2.4 过零检测芯片
和电平转换或者其他应用电路一样，过零检测也有专门的芯片，当然还是老问题，成本相对前面较高。

没用过，暂时没有啥好推荐的，大家可以自行搜索。

## 过零检测电路
通过上面小结我们说明了多种 220V 交流过零检测的方案，在实际使用中大家完全可以根据自己的情况搭建起电路使用。

博主这几天网上也是查看了很多的视频和文章，网上众多的电路中，我也挑选了几个比较实在的推荐给大家，此处的借鉴我都会注明出处，大家知道我的很多文章会随着我的测试使用进度保持着更新，如果有机会，所有电路图我都会做成实物进行测试的，落地才是王道！

### 参考电路一

此电路来源，B站：龙顺宇老师
![alt text](<assets/Zero Crossing Detection/image-6.png>)
### 参考电路二

此电路来源，B站：皆行电子

![alt text](<assets/Zero Crossing Detection/image-7.png>)

在实际中我用的是基本上是这个电路，直接使用示波器查看过零信号，实际的测试结果如下：
![alt text](<assets/Zero Crossing Detection/image-8.png>)